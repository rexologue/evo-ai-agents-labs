{
  "tools": [
    {
      "name": "loan_schedule_annuity",
      "description": "Аннуитетный кредит: расчёт фиксированного ежемесячного платежа и помесячного графика. Инструмент строит таблицу платежей по аннуитетной схеме. Для каждого месяца возвращаются: payment (платёж), interest (проценты), principal_component (тело), remaining_principal (остаток), cumulative_interest и cumulative_principal (накопленные суммы).",
      "parameters": {
        "principal": {
          "type": "float",
          "description": "Сумма кредита (> 0, ≤ лимита)",
          "required": true
        },
        "annual_rate_percent": {
          "type": "float",
          "description": "Годовая ставка в процентах (0..лимит)",
          "required": true
        },
        "months": {
          "type": "int",
          "description": "Срок в месяцах (1..лимит)",
          "required": true
        }
      },
      "returns": {
        "type": "ToolResult",
        "description": "Результат расчета с графиком платежей и сводкой. Содержит formatted text, structured_content (summary и schedule) и meta информацию."
      },
      "errors": [
        {
          "code": -32602,
          "message": "Неверные параметры",
          "description": "Возникает при неверных или слишком больших значениях параметров"
        },
        {
          "code": -32603,
          "message": "Ошибка при выполнении расчета",
          "description": "Внутренняя ошибка при выполнении расчета"
        }
      ],
      "notes": "Денежные величины округляются до 2 знаков. В последний месяц выполняется коррекция, чтобы остаток стал 0.00."
    },
    {
      "name": "loan_schedule_differential",
      "description": "Дифференцированный кредит: постоянная часть тела и уменьшающиеся проценты. На выходе — помесячная таблица с полями: month, payment, interest, principal_component, remaining_principal, cumulative_interest, cumulative_principal.",
      "parameters": {
        "principal": {
          "type": "float",
          "description": "Сумма кредита (> 0, ≤ лимита)",
          "required": true
        },
        "annual_rate_percent": {
          "type": "float",
          "description": "Годовая ставка в процентах (0..лимит)",
          "required": true
        },
        "months": {
          "type": "int",
          "description": "Срок в месяцах (1..лимит)",
          "required": true
        }
      },
      "returns": {
        "type": "ToolResult",
        "description": "Результат расчета с графиком платежей и сводкой. Содержит summary (principal, annual_rate_percent, months, first_month_payment, last_month_payment, total_paid, total_interest) и schedule (помесячные строки)."
      },
      "errors": [
        {
          "code": -32602,
          "message": "Неверные параметры",
          "description": "Возникает при неверных или слишком больших значениях параметров"
        },
        {
          "code": -32603,
          "message": "Ошибка при выполнении расчета",
          "description": "Внутренняя ошибка при выполнении расчета"
        }
      ],
      "notes": "Все суммы округлены до 2 знаков. Последняя строка корректируется по копейкам."
    },
    {
      "name": "deposit_schedule_compound",
      "description": "Вклад с ежемесячной капитализацией и взносами. Строит график: starting_balance, contribution, interest_earned, ending_balance, cumulative_contributions, cumulative_interest — для каждого месяца.",
      "parameters": {
        "initial_amount": {
          "type": "float",
          "description": "Начальная сумма (≥ 0, ≤ лимита)",
          "required": true
        },
        "annual_rate_percent": {
          "type": "float",
          "description": "Годовая ставка в процентах (0..лимит)",
          "required": true
        },
        "months": {
          "type": "int",
          "description": "Срок в месяцах (1..лимит)",
          "required": true
        },
        "monthly_contribution": {
          "type": "float",
          "description": "Ежемесячный взнос (≥ 0, ≤ лимита)",
          "required": true
        },
        "contribution_at_beginning": {
          "type": "bool",
          "description": "True — взнос в начале месяца, False — в конце",
          "required": true
        }
      },
      "returns": {
        "type": "ToolResult",
        "description": "Результат расчета с графиком вклада и сводкой. Содержит summary (initial_amount, annual_rate_percent, months, monthly_contribution, contribution_at_beginning, final_balance, total_contributions, total_interest) и schedule (помесячные строки)."
      },
      "errors": [
        {
          "code": -32602,
          "message": "Неверные параметры",
          "description": "Возникает при неверных значениях или если contribution_at_beginning не является булевым значением"
        },
        {
          "code": -32603,
          "message": "Ошибка при выполнении расчета",
          "description": "Внутренняя ошибка при выполнении расчета или при чрезмерном росте баланса"
        }
      ],
      "notes": "Округление до 2 знаков. Есть защитная отсечка по максимальному балансу."
    },
    {
      "name": "compare_loan_schedules",
      "description": "Сравнение аннуитетного и дифференцированного кредитов. Инструмент сравнивает два типа кредитов с одинаковыми параметрами и показывает: общую сумму выплат для каждого типа, переплату по процентам, разницу в платежах, преимущества каждого типа кредита.",
      "parameters": {
        "principal": {
          "type": "float",
          "description": "Сумма кредита (> 0, ≤ лимита)",
          "required": true
        },
        "annual_rate_percent": {
          "type": "float",
          "description": "Годовая ставка в процентах (0..лимит)",
          "required": true
        },
        "months": {
          "type": "int",
          "description": "Срок в месяцах (1..лимит)",
          "required": true
        }
      },
      "returns": {
        "type": "ToolResult",
        "description": "Результат сравнения двух типов кредитов. Содержит comparison (сравнение двух типов кредитов), annuity (данные аннуитетного кредита), differential (данные дифференцированного кредита) и recommendation (рекомендация по выбору типа кредита)."
      },
      "errors": [
        {
          "code": -32602,
          "message": "Неверные параметры",
          "description": "Возникает при неверных или слишком больших значениях параметров"
        },
        {
          "code": -32603,
          "message": "Ошибка при выполнении расчета",
          "description": "Внутренняя ошибка при выполнении расчета"
        }
      ],
      "notes": "Инструмент выполняет расчеты для обоих типов кредитов и предоставляет детальное сравнение с рекомендациями."
    },
    {
      "name": "investment_calculator",
      "description": "Калькулятор инвестиций с регулярными взносами и капитализацией. Рассчитывает рост инвестиций с учетом регулярных взносов и сложных процентов. Показывает помесячный график роста капитала, накопленные проценты и итоговую сумму.",
      "parameters": {
        "initial_amount": {
          "type": "float",
          "description": "Начальная сумма инвестиций (≥ 0, ≤ лимита)",
          "required": true
        },
        "annual_rate_percent": {
          "type": "float",
          "description": "Годовая доходность в процентах (0..лимит)",
          "required": true
        },
        "months": {
          "type": "int",
          "description": "Срок инвестирования в месяцах (1..лимит)",
          "required": true
        },
        "monthly_contribution": {
          "type": "float",
          "description": "Ежемесячный взнос (≥ 0, ≤ лимита)",
          "required": true
        },
        "contribution_at_beginning": {
          "type": "bool",
          "description": "True — взнос в начале месяца, False — в конце",
          "required": true
        }
      },
      "returns": {
        "type": "ToolResult",
        "description": "Результат расчета инвестиций. Содержит summary (итоговая сумма, общие взносы, накопленные проценты), schedule (помесячный график роста инвестиций) и growth_metrics (метрики роста: ROI, средняя годовая доходность, прирост капитала и т.д.)."
      },
      "errors": [
        {
          "code": -32602,
          "message": "Неверные параметры",
          "description": "Возникает при неверных значениях или если contribution_at_beginning не является булевым значением"
        },
        {
          "code": -32603,
          "message": "Ошибка при выполнении расчета",
          "description": "Внутренняя ошибка при выполнении расчета"
        }
      ],
      "notes": "Инструмент рассчитывает рост инвестиций с учетом капитализации процентов и регулярных взносов. Показывает детальные метрики роста, включая ROI и среднюю годовую доходность."
    }
  ],
  "metadata": {
    "version": "1.0.0",
    "server_name": "mcp-finance-server",
    "description": "MCP сервер для финансовых расчетов: кредиты, вклады и инвестиции",
    "transport": "streamable-http",
    "language": "go",
    "observability": {
      "metrics": "Prometheus",
      "tracing": "OpenTelemetry"
    }
  }
}
